<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Soil Humidity Monitor</title>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; }
    .value { font-size: 48px; font-weight: bold; }
  </style>
</head>
<body>

<h1>Soil Humidity Monitor</h1>
<div class="value" id="humidity">--%</div>


<!-- Ta inte bort! Det här scriptet behövs för att koppla upp mot MQTT-brokern och visa fuktvärdet. --> 
<script>
  // Byt det här till rätt IP-adress (den IP på den dator som kör MQTT-brokern)
  // Notera: porten (9001) är till en så kallad "websocket"!
  const host = "ws://192.168.1.203:9001";

  // Connect via WebSockets
  const client = mqtt.connect(host);

  client.on("connect", function () {
    console.log("Connected to MQTT WebSocket broker");
    client.subscribe("grupp3/soil/humidity");
  });

  client.on("message", function (topic, message) {
    document.getElementById("humidity").innerText = message.toString() + "%";
  });
</script>
<!-- Slut på JavaScript. --> 

</body>
</html>
